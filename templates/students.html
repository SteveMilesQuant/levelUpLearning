{% extends 'base.html' %}

{% block content %}
  <span class='sidebar'>
    <div class='sidebar-title'><h1><a class='selectable' href='/students'>Students</a></h1></div>
    <hr class='h-divider'></hr>
    {% for id, name in student_names.items() %}
      <div class='sidebar-item menu-font'><a class='selectable' href="/students/{{id}}">{{name}}</a></div>
    {% endfor %}
    <div class='sidebar-item'><button class='selectable menu-font' onclick="unhideElem('student-form')">+ Add Student</button></div>
  </span>
  {% if current_student is not none %}
    <span class='content-body'>
      <div class='content-item'><h1>Student Profile</h1></div>
      <hr class='content-item h-divider'></hr>
      <div class='content-item'>
        <div id='student-name'>
          <span><strong>Name:</strong> {{current_student.name}}</span>
          <span><button class='selectable' onclick="swapHidden('student-name', 'edit-student-name')"><img class='small-button' src="{{ url_for('images', path='/pencil.png') }}" alt='Edit'/></button></span>
        </div>
        <div id='edit-student-name' hidden>
          <form  method='post' action='/students/{{current_student.id}}'>
            <label for='student_name'><strong>Name:</strong></label>
            <input type='text' name='student_name' value="{{current_student.name}}">
            <input type="image" class='small-button selectable' src="{{ url_for('images', path='/confirm.png') }}" border="0" alt="Submit" />
            <input type="image" class='small-button selectable' src="{{ url_for('images', path='/cancel.png') }}" border="0" alt="Cancel" onclick="swapHidden('edit-student-name', 'student-name')" />
          </form>
        </div>
      </div>
      <div class='content-item'>
        <div id='student-birthdate'>
          <span><strong>Birthdate:</strong> {{current_student.birthdate}}</span>
          <span><button class='selectable' onclick="swapHidden('student-birthdate', 'edit-student-birthdate')"><img class='small-button' src="{{ url_for('images', path='/pencil.png') }}" alt='Edit'/></button></span>
        </div>
        <div id='edit-student-birthdate' hidden>
          <form  method='post' action='/students/{{current_student.id}}'>
            <label for='student_birthdate'><strong>Birthdate:</strong></label>
            <input type='date' name='student_birthdate' value="{{current_student.birthdate}}">
            <input type="image" class='small-button selectable' src="{{ url_for('images', path='/confirm.png') }}" border="0" alt="Submit" />
            <input type="image" class='small-button selectable' src="{{ url_for('images', path='/cancel.png') }}" border="0" alt="Cancel" onclick="swapHidden('edit-student-birthdate', 'student-birthdate')" />
          </form>
        </div>
      </div>
      <div class='content-item'>
        <div id='student-gradelevel'>
          <span><strong>Current grade level:</strong> {{current_student.grade_level.html_display()}}</span>
          <span><button class='selectable' onclick="swapHidden('student-gradelevel', 'edit-student-gradelevel')"><img class='small-button' src="{{ url_for('images', path='/pencil.png') }}" alt='Edit'/></button></span>
        </div>
        <div id='edit-student-gradelevel' hidden>
          <form  method='post' action='/students/{{current_student.id}}'>
            <label for='student_grade_level'><strong>Current grade level:</strong></label>
            <select class='form-item' type='select' name='student_grade_level' required>
              {% for grade in grade_levels %}
                <option value="{{grade.value}}" {% if grade.value == current_student.grade_level.value %}selected{% endif %}>{{grade.html_display()}}</option>
              {% endfor %}
            </select>
            <input type="image" class='small-button selectable' src="{{ url_for('images', path='/confirm.png') }}" border="0" alt="Submit" />
            <input type="image" class='small-button selectable' src="{{ url_for('images', path='/cancel.png') }}" border="0" alt="Cancel" onclick="swapHidden('edit-student-gradelevel', 'student-gradelevel')" />
          </form>
        </div>
      </div>
      <div class='content-item'>
        <button class='selectable' onclick="if (confirm('Are you sure you want to delete {{current_student.name}}?')) { deleteResource('/students/{{current_student.id}}'); redirect('/students'); }">
          <span><img class='small-button' src="{{ url_for('images', path='/cancel.png') }}" alt='Delete'/></span>
          <span><strong>Delete Student</strong></span>
        </button>
      </div>
    </span>
    <div class="v-divider"></div>
    <span class='content-body'>
      <div class='content-item'><h1>Enrolled Camps</h1></div>
      <hr class='content-item h-divider'></hr>
    </span>
  {% endif %}
  <div class='pop-up' id='student-form' hidden>
    <div class='pop-up-item'>
      <h1>New Student</h1>
      <form method='post' action='/students'>
        <label class='form-item' for='student_name'><strong>Name:</strong></label><br>
        <input class='form-item form-input-text' type='text' name='student_name' required><br>
        <label class='form-item' for='student_birthdate'><strong>Birthdate:</strong></label><br>
        <input class='form-item' type='date' name='student_birthdate' required><br>
        <label class='form-item' for='student_grade_level'><strong>Current grade level:</strong></label><br>
        <select class='form-item' type='select' name='student_grade_level' required>
          {% for grade in grade_levels %}
            <option value="{{grade.value}}" {% if grade.value == 6 %}selected{% endif %}>{{grade.html_display()}}</option>
          {% endfor %}
        </select><br>
        <input class='form-item small-button selectable' type="image" src="{{ url_for('images', path='/confirm.png') }}" border="0" alt="Submit" />
        <a class='form-item selectable' href='/students'><img class='small-button' src="{{ url_for('images', path='/cancel.png') }}" alt='Cancel'/></a>
      </form>
    </div>
  </div>
{% endblock %}


