{% extends 'base.html' %}

{% block content %}
  <span class='sidebar'>
    <div class='sidebar-title'><h1><a class='selectable' href='/programs'>Program Design</a></h1></div>
    <hr class='h-divider'></hr>
    <div class='sidebar-item menu-font'><a class='selectable' href="/programs/{{current_program.id}}">Main</a></div>
    {% for level in current_program.levels.values() %}
      <div class='sidebar-item menu-font'><a class='selectable' href="/programs/{{current_program.id}}/{{level.id}}">{{level.list_index}}: {{level.title}}</a></div>
    {% endfor %}
    <div class='sidebar-item'><button class='add-button selectable menu-font' onclick="unhideElem('level-form')">+ Add Level</button></div>
  </span>
  {% if current_level is none %}
    <span class='content-body'>
      <div class='content-item'><h1>Basic Information</h1></div>
      <hr class='content-item h-divider'></hr>
      <div class='content-item'>
        <div id='program-title'>
          <span>Title: {{current_program.title}}</span>
          <span><button class='selectable' onclick="swapHidden('program-title', 'edit-program-title')"><img class='small-button' src="{{ url_for('images', path='/pencil.png') }}" alt='Edit'/></button></span>
        </div>
        <div id='edit-program-title' hidden>
          <form  method='post' action='/programs/{{current_program.id}}'>
            <label for='program_title'>Title:</label>
            <input type='text' name='program_title' value="{{current_program.title}}">
            <input type="image" class='small-button selectable' src="{{ url_for('images', path='/confirm.png') }}" border="0" alt="Submit" />
            <input type="image" class='small-button selectable' src="{{ url_for('images', path='/cancel.png') }}" border="0" alt="Cancel" onclick="swapHidden('edit-program-title', 'program-title')" />
          </form>
        </div>
      </div>
    </span>
  {% else %}
    <span class='content-body'>
      <div class='content-item'>
        <div id='level-title'>
          <span><h2>{{current_level.title}}</h2></span>
          <span><button class='selectable' onclick="swapHidden('level-title', 'edit-level-title')"><img class='small-button' src="{{ url_for('images', path='/pencil.png') }}" alt='Edit'/></button></span>
        </div>
        <div id='edit-level-title' hidden>
          <form  method='post' action='/programs/{{current_level.id}}'>
            <input type='text' name='program_title' value="{{current_level.title}}">
            <input type="image" class='small-button selectable' src="{{ url_for('images', path='/confirm.png') }}" border="0" alt="Submit" />
            <input type="image" class='small-button selectable' src="{{ url_for('images', path='/cancel.png') }}" border="0" alt="Cancel" onclick="swapHidden('edit-level-title', 'level-title')" />
          </form>
        </div>
      </div>
      <div class='content-item'>
        <div id='level-desc'>
          <div><h2>Description:</h2></div>
          <div>
            <span><p>{{current_level.description}}</p></span>
            <span><button class='selectable' onclick="swapHidden('level-desc', 'edit-level-desc')"><img class='small-button' src="{{ url_for('images', path='/pencil.png') }}" alt='Edit'/></button></span>
          </div>
        </div>
        <div id='edit-level-desc' hidden>
          <form method='post' action='/programs/{{current_program.id}}/{{current_level.id}}'>
            <label for='level_description'><h2>Description:</h2></label><br>
            <input type='text' class='form-input-longtext' name='level_description' value="{{current_level.description}}">
            <input type="image" class='small-button selectable' src="{{ url_for('images', path='/confirm.png') }}" border="0" alt="Submit" />
            <input type="image" class='small-button selectable' src="{{ url_for('images', path='/cancel.png') }}" border="0" alt="Cancel" onclick="swapHidden('edit-level-desc', 'level-desc')" />
          </form>
        </div>
      </div>
    </span>
  {% endif %}
  <div class='pop-up' id='level-form' hidden>
    <div class='pop-up-item'>
      <h1>New Level for {{current_program.title}} </h1>
      <form method='post' action='/programs/{{current_program.id}}'>
        <label class='form-item' for='level_title'>Title:</label><br>
        <input class='form-item form-input-text' type='text' name='level_title' required><br>
        <label class='form-item' for='level_desc'>Description:</label><br>
        <input class='form-item form-input-longtext' type='text' name='level_desc' required><br>
        <input class='form-item small-button selectable' type="image" src="{{ url_for('images', path='/confirm.png') }}" border="0" alt="Submit" />
        <a class='form-item selectable' href='/programs/{{current_program.id}}'><img class='small-button' src="{{ url_for('images', path='/cancel.png') }}" alt='Cancel'/></a>
      </form>
    </div>
  </div>
{% endblock %}
